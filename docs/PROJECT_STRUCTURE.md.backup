# Holodeck-Claude å®Œæ•´é¡¹ç›®ç»“æ„æ ‘

## ğŸ“ é¡¹ç›®æ ¹ç›®å½•

```
holodeck-claude/
â”œâ”€â”€ .claude-plugin/                 # Claude Codeæ’ä»¶é…ç½®
â”‚   â””â”€â”€ plugin.json                 # æ’ä»¶æ¸…å•
â”‚
â”œâ”€â”€ holodeck_core/                  # æ ¸å¿ƒPythonåº“ (ä¸šåŠ¡é€»è¾‘å±‚)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ schemas/                    # æ•°æ®æ¨¡å‹å±‚ (18ä¸ªPydantic Schema)
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ session.py               # Sessionç®¡ç†
â”‚   â”‚   â”œâ”€â”€ scene_objects.py         # åœºæ™¯å¯¹è±¡
â”‚   â”‚   â”œâ”€â”€ constraints.py           # ç©ºé—´çº¦æŸ
â”‚   â”‚   â”œâ”€â”€ layout.py               # å¸ƒå±€æ±‚è§£
â”‚   â”‚   â”œâ”€â”€ object_cards.py          # ç‰©ä½“å¡ç‰‡
â”‚   â”‚   â”œâ”€â”€ qc_reports.py            # è´¨é‡æ§åˆ¶
â”‚   â”‚   â”œâ”€â”€ asset_metadata.py        # èµ„äº§å…ƒæ•°æ®
â”‚   â”‚   â”œâ”€â”€ edit_history.py          # ç¼–è¾‘å†å²
â”‚   â”‚   â””â”€â”€ rendering.py             # æ¸²æŸ“é…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ storage/                     # å­˜å‚¨å±‚
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ file_storage.py          # æ–‡ä»¶æ“ä½œ
â”‚   â”‚   â”œâ”€â”€ session_manager.py       # Sessionç®¡ç†
â”‚   â”‚   â””â”€â”€ workspace_manager.py     # å·¥ä½œç©ºé—´ç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ object_gen/                  # 3Dèµ„äº§ç”Ÿæˆæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ asset_generator.py
â”‚   â”‚   â”œâ”€â”€ asset_manager.py
â”‚   â”‚   â”œâ”€â”€ cache.py
â”‚   â”‚   â”œâ”€â”€ sf3d_client.py
â”‚   â”‚   â”œâ”€â”€ normalizers.py
â”‚   â”‚   â””â”€â”€ material_manager.py      # PBRæè´¨ç®¡ç† [æœ€æ–°å®Œæˆ]
â”‚   â”‚
â”‚   â”œâ”€â”€ scene_analysis/              # åœºæ™¯åˆ†ææ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ clients/                 # APIå®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ hybrid_client.py
â”‚   â”‚   â”‚   â””â”€â”€ openai_client.py
â”‚   â”‚   â””â”€â”€ prompts/                # æç¤ºæ¨¡æ¿
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ background_extraction.yaml
â”‚   â”‚       â”œâ”€â”€ card_generation.yaml
â”‚   â”‚       â”œâ”€â”€ object_extraction.yaml
â”‚   â”‚       â”œâ”€â”€ qc_evaluation.yaml
â”‚   â”‚       â”œâ”€â”€ scene_reference.yaml
â”‚   â”‚       â””â”€â”€ templates.py
â”‚   â”‚
â”‚   â”œâ”€â”€ scene_gen/                   # åœºæ™¯ç”Ÿæˆæ¨¡å— (DFSæ±‚è§£å™¨)
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ constraint_primitives.py
â”‚   â”‚   â”œâ”€â”€ dfs_solver.py
â”‚   â”‚   â”œâ”€â”€ collision_detection.py
â”‚   â”‚   â”œâ”€â”€ failure_analysis.py
â”‚   â”‚   â””â”€â”€ constraint_generator.py
â”‚   â”‚
â”‚   â”œâ”€â”€ editing/                     # ç¼–è¾‘åŠŸèƒ½æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ asset_editor.py
â”‚   â”‚   â”œâ”€â”€ constraint_manager.py
â”‚   â”‚   â”œâ”€â”€ edit_engine.py
â”‚   â”‚   â””â”€â”€ feedback_parser.py
â”‚   â”‚
â”‚   â”œâ”€â”€ blender/                     # Blenderé›†æˆæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ camera_manager.py
â”‚   â”‚   â”œâ”€â”€ material_manager.py
â”‚   â”‚   â”œâ”€â”€ render_engine.py
â”‚   â”‚   â””â”€â”€ scene_assembler.py
â”‚   â”‚
â”‚   â””â”€â”€ image_generation/            # å›¾åƒç”Ÿæˆæ¨¡å—
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ comfyui_client.py
â”‚       â”œâ”€â”€ image_manager.py
â”‚       â””â”€â”€ workflows.py
â”‚
â”œâ”€â”€ servers/                         # MCPæœåŠ¡å™¨å±‚
â”‚   â””â”€â”€ holodeck_mcp/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ server.py                # MCPæœåŠ¡å™¨ä¸»å…¥å£
â”‚       â”œâ”€â”€ tool_registry.py         # å·¥å…·æ³¨å†Œç³»ç»Ÿ
â”‚       â””â”€â”€ tools/                   # MCPå·¥å…·å®ç°
â”‚           â”œâ”€â”€ __init__.py
â”‚           â”œâ”€â”€ session_tools.py
â”‚           â”œâ”€â”€ scene_analysis_tools.py
â”‚           â”œâ”€â”€ asset_gen_tools.py
â”‚           â”œâ”€â”€ edit_tools.py
â”‚           â””â”€â”€ scene_analysis_tools_old.py
â”‚
â”œâ”€â”€ commands/                        # Claude Codeå‘½ä»¤å®šä¹‰
â”‚   â”œâ”€â”€ holodeck_build.md
â”‚   â”œâ”€â”€ holodeck_edit.md
â”‚   â””â”€â”€ holodeck_replay.md
â”‚
â”œâ”€â”€ skills/                          # Agent Skillså·¥ä½œæµè§„èŒƒ
â”‚   â”œâ”€â”€ holodeck-build/
â”‚   â”‚   â””â”€â”€ SKILL.md
â”‚   â”œâ”€â”€ holodeck-edit/
â”‚   â”‚   â””â”€â”€ SKILL.md
â”‚   â””â”€â”€ holodeck-debug/
â”‚       â””â”€â”€ SKILL.md
â”‚
â”œâ”€â”€ tests/                           # æµ‹è¯•å¥—ä»¶
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ fixtures/
â”‚   â”œâ”€â”€ test_schemas.py
â”‚   â”œâ”€â”€ test_session_manager.py
â”‚   â”œâ”€â”€ test_asset_metadata.py
â”‚   â”œâ”€â”€ test_object_cards.py
â”‚   â”œâ”€â”€ test_qc_reports.py
â”‚   â”œâ”€â”€ test_enhanced_schemas.py
â”‚   â”œâ”€â”€ test_integration.py
â”‚   â””â”€â”€ test_blender_integration.py  # Blenderé›†æˆæµ‹è¯• [æœ€æ–°]
â”‚
â”œâ”€â”€ config/                          # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ examples/
â”‚
â”œâ”€â”€ runtime/                         # è¿è¡Œæ—¶ç¯å¢ƒ
â”‚   â”œâ”€â”€ asset_worker/
â”‚   â”œâ”€â”€ blender_worker/
â”‚   â””â”€â”€ solver_worker/
â”‚
â”œâ”€â”€ workspace/                       # å·¥ä½œç©ºé—´ (è¿è¡Œæ—¶æ•°æ®)
â”‚   â”œâ”€â”€ caches/
â”‚   â”‚   â”œâ”€â”€ generated_assets/
â”‚   â”‚   â””â”€â”€ image_hashes/
â”‚   â”œâ”€â”€ sessions/                   # ä¼šè¯æ•°æ®å­˜å‚¨
â”‚   â””â”€â”€ temp/
â”‚
â”œâ”€â”€ docs/                            # æ–‡æ¡£
â”‚   â””â”€â”€ reference/                  # å‚è€ƒæ–‡æ¡£
â”‚
â”œâ”€â”€ pyproject.toml                   # é¡¹ç›®é…ç½®æ–‡ä»¶
â”œâ”€â”€ README.md                        # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ development-log.md               # å¼€å‘æ—¥å¿—
â”œâ”€â”€ .mcp.json                        # MCPæœåŠ¡å™¨é…ç½® [å½“å‰: ä»…blender]
â””â”€â”€ uv.lock                          # ä¾èµ–é”å®šæ–‡ä»¶
```

## ğŸ“Š é¡¹ç›®ç»Ÿè®¡

- **æ€»æ–‡ä»¶æ•°**: 317
- **Pythonæºç **: 76
- **JSONé…ç½®æ–‡ä»¶**: 81
- **Markdownæ–‡æ¡£**: 15
- **Pydantic Schema**: 18
- **MCPå·¥å…·**: 6
- **Agent Skills**: 3
- **æ´»è·ƒMCPæœåŠ¡**: 1 (blender)
- **å¾…ä¿®å¤MCPæœåŠ¡**: 1 (holodeck-mcp)

## ğŸ—ï¸ æ¶æ„å±‚æ¬¡

### 1. æ’ä»¶å±‚ (Plugin Layer)
- **.claude-plugin/**: Claude Codeæ’ä»¶é…ç½®
- **commands/**: ç”¨æˆ·å‘½ä»¤å®šä¹‰
- **skills/**: Agent Skillså·¥ä½œæµè§„èŒƒ
- **.mcp.json**: MCPæœåŠ¡å™¨é…ç½® [å½“å‰çŠ¶æ€: ä»…å¯ç”¨blender]

### 2. å·¥å…·å±‚ (Tool Layer)
- **servers/holodeck_mcp/**: MCPåè®®å®ç° [çŠ¶æ€: ä»£ç å®Œæ•´ï¼Œä¸´æ—¶ç¦ç”¨]
- **blender**: å¤–éƒ¨Blender MCPæœåŠ¡ [çŠ¶æ€: æ´»è·ƒ]
- æš´éœ²å¯æ‰§è¡Œçš„Pythonå·¥å…·ç»™Claude Code

### 3. æ ¸å¿ƒå±‚ (Core Layer)
- **holodeck_core/**: çº¯Pythonä¸šåŠ¡é€»è¾‘
- åŒ…å«æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
- å¯ç‹¬ç«‹æµ‹è¯•å’Œå¤ç”¨

### 4. æ•°æ®å±‚ (Data Layer)
- **schemas/**: Pydanticæ•°æ®æ¨¡å‹
- å®šä¹‰æ‰€æœ‰ä¸­é—´æ•°æ®ç»“æ„å’Œåè®®

### 5. å­˜å‚¨å±‚ (Storage Layer)
- **storage/**: æ–‡ä»¶å’Œå·¥ä½œç©ºé—´ç®¡ç†
- SessionæŒä¹…åŒ–å’Œæ•°æ®è¯»å†™

### 6. è¿è¡Œæ—¶å±‚ (Runtime Layer)
- **runtime/**: Workerè¿›ç¨‹ç®¡ç†
- é‡å‹ä»»åŠ¡çš„åå°æ‰§è¡Œ

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 3Dèµ„äº§ç”Ÿæˆ (object_gen/)
```
object_gen/
â”œâ”€â”€ asset_generator.py     # èµ„äº§ç”Ÿæˆå™¨
â”œâ”€â”€ asset_manager.py       # èµ„äº§ç®¡ç†å™¨
â”œâ”€â”€ cache.py               # åŒå±‚ç¼“å­˜ç³»ç»Ÿ
â”œâ”€â”€ sf3d_client.py         # SF3Då®¢æˆ·ç«¯
â”œâ”€â”€ normalizers.py         # GLBå½’ä¸€åŒ–
â””â”€â”€ material_manager.py    # PBRæè´¨ç®¡ç† âœ¨
```

**æœ€æ–°å®Œæˆ**: MaterialManager - å®Œæ•´çš„PBRæè´¨ç®¡ç†ç³»ç»Ÿ
- æ”¯æŒæ‰€æœ‰æ ‡å‡†PBRçº¹ç†ç±»å‹
- Blenderæ·±åº¦é›†æˆ
- å®Œæ•´çš„æµ‹è¯•è¦†ç›–

### åœºæ™¯åˆ†æ (scene_analysis/)
```
scene_analysis/
â”œâ”€â”€ clients/               # APIå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ openai_client.py   # OpenAIé›†æˆ
â”‚   â””â”€â”€ hybrid_client.py   # æ··åˆå®¢æˆ·ç«¯
â””â”€â”€ prompts/               # æç¤ºå·¥ç¨‹æ¨¡æ¿
    â”œâ”€â”€ scene_reference.yaml
    â”œâ”€â”€ object_extraction.yaml
    â”œâ”€â”€ card_generation.yaml
    â””â”€â”€ qc_evaluation.yaml
```

### åœºæ™¯ç”Ÿæˆ (scene_gen/)
```
scene_gen/
â”œâ”€â”€ constraint_primitives.py  # ç©ºé—´çº¦æŸåŸè¯­
â”œâ”€â”€ dfs_solver.py            # DFSæ±‚è§£å™¨
â”œâ”€â”€ collision_detection.py   # ç¢°æ’æ£€æµ‹
â”œâ”€â”€ failure_analysis.py      # å¤±è´¥åˆ†æ
â””â”€â”€ constraint_generator.py  # çº¦æŸç”Ÿæˆå™¨
```

### ç¼–è¾‘åŠŸèƒ½ (editing/)
```
editing/
â”œâ”€â”€ asset_editor.py        # èµ„äº§ç¼–è¾‘å™¨
â”œâ”€â”€ constraint_manager.py  # çº¦æŸç®¡ç†
â”œâ”€â”€ edit_engine.py         # ç¼–è¾‘å¼•æ“
â””â”€â”€ feedback_parser.py     # åé¦ˆè§£æå™¨
```

### Blenderé›†æˆ (blender/)
```
blender/
â”œâ”€â”€ camera_manager.py      # ç›¸æœºç®¡ç†
â”œâ”€â”€ material_manager.py    # æè´¨ç®¡ç†
â”œâ”€â”€ render_engine.py       # æ¸²æŸ“å¼•æ“
â””â”€â”€ scene_assembler.py     # åœºæ™¯ç»„è£…å™¨
```

## ğŸ”§ MCPå·¥å…·æ¥å£

### Sessionå·¥å…·
- `session.create()` - åˆ›å»ºæ–°ä¼šè¯
- `session.load()` - åŠ è½½ä¼šè¯æ•°æ®
- `session.list()` - åˆ—å‡ºæ‰€æœ‰ä¼šè¯
- `session.snapshot()` - åˆ›å»ºå¿«ç…§

### åœºæ™¯åˆ†æå·¥å…·
- `scene.generate_ref_image()` - ç”Ÿæˆåœºæ™¯å‚è€ƒå›¾
- `scene.extract_objects()` - æå–ç‰©ä½“
- `scene.generate_object_cards()` - ç”Ÿæˆç‰©ä½“å¡ç‰‡

### èµ„äº§ç”Ÿæˆå·¥å…·
- `asset.generate_from_card()` - ä»å¡ç‰‡ç”Ÿæˆèµ„äº§
- `asset.batch_generate()` - æ‰¹é‡ç”Ÿæˆ
- `asset.normalize()` - èµ„äº§å½’ä¸€åŒ–

### åœºæ™¯ç”Ÿæˆå·¥å…·
- `layout.generate_constraints()` - ç”Ÿæˆçº¦æŸ
- `layout.solve_dfs()` - DFSæ±‚è§£
- `layout.validate()` - å¸ƒå±€éªŒè¯

### Blenderå·¥å…·
- `blender.assemble()` - åœºæ™¯ç»„è£…
- `blender.render()` - æ¸²æŸ“è¾“å‡º

### ç¼–è¾‘å·¥å…·
- `edit.parse_feedback()` - è§£æåé¦ˆ
- `edit.apply_layout()` - åº”ç”¨å¸ƒå±€ç¼–è¾‘
- `edit.replace_asset()` - æ›¿æ¢èµ„äº§

## ğŸ§ª æµ‹è¯•æ¶æ„

### å•å…ƒæµ‹è¯•
- SchemaéªŒè¯æµ‹è¯•
- Sessionç®¡ç†æµ‹è¯•
- å·¥å…·å‡½æ•°æµ‹è¯•

### é›†æˆæµ‹è¯•
- MCPå·¥å…·é›†æˆæµ‹è¯•
- Blenderé›†æˆæµ‹è¯•
- ç«¯åˆ°ç«¯æµç¨‹æµ‹è¯•

### æ€§èƒ½æµ‹è¯•
- èµ„äº§ç”Ÿæˆæ€§èƒ½æµ‹è¯•
- ç¼“å­˜ç³»ç»Ÿæ€§èƒ½æµ‹è¯•
- å¹¶å‘å¤„ç†æµ‹è¯•

## ğŸ“ æ•°æ®æµ

```
ç”¨æˆ·è¯·æ±‚
    â†“
Sessionåˆ›å»º (storage/)
    â†“
åœºæ™¯åˆ†æ (scene_analysis/)
    â†“
ç‰©ä½“å¡ç‰‡ç”Ÿæˆ
    â†“
3Dèµ„äº§ç”Ÿæˆ (object_gen/)
    â†“
çº¦æŸç”Ÿæˆ (scene_gen/)
    â†“
DFSå¸ƒå±€æ±‚è§£
    â†“
Blenderç»„è£…æ¸²æŸ“ (blender/)
    â†“
è¾“å‡ºç»“æœ
```

## ğŸ”„ ç¼–è¾‘æµç¨‹

```
ç”¨æˆ·åé¦ˆ
    â†“
åé¦ˆè§£æ (editing/)
    â†“
èšç„¦å¯¹è±¡è¯†åˆ«
    â†“
çº¦æŸå¢é‡æ›´æ–°
    â†“
å±€éƒ¨é‡æ±‚è§£
    â†“
èµ„äº§æ›¿æ¢/æ›´æ–°
    â†“
é‡æ–°æ¸²æŸ“
```

## ğŸ¨ æŠ€æœ¯æ ˆ

- **Python 3.11+**: æ ¸å¿ƒç¼–ç¨‹è¯­è¨€
- **Pydantic v2**: æ•°æ®éªŒè¯å’Œåºåˆ—åŒ–
- **Claude Code**: CLIå’Œæ’ä»¶ç³»ç»Ÿ
- **MCPåè®®**: å·¥å…·æš´éœ²æ ‡å‡†
- **Blender**: 3Dæ¸²æŸ“å’Œå¯è§†åŒ–
- **OpenAI API**: GPTé›†æˆ
- **ComfyUI**: å›¾åƒç”Ÿæˆ
- **SF3D**: 3Dèµ„äº§ç”Ÿæˆ

---

**æœ€åæ›´æ–°**: 2026å¹´1æœˆ22æ—¥
**é¡¹ç›®çŠ¶æ€**: æ ¸å¿ƒåŠŸèƒ½å®Œæˆï¼ŒBlenderé›†æˆå°±ç»ªï¼ŒMCPé…ç½®ä¼˜åŒ–
**å®Œæˆåº¦**: çº¦ 85%
**MCPçŠ¶æ€**: holodeck-mcpä»£ç å®Œæ•´ä½†ä¸´æ—¶ç¦ç”¨ï¼Œblenderæ´»è·ƒè¿è¡Œ