# Holodeck ç«¯åˆ°ç«¯éªŒæ”¶æµ‹è¯•ç”¨ä¾‹

## æµ‹è¯•ç›®æ ‡
éªŒè¯å®Œæ•´çš„ Holodeck build æµç¨‹ï¼Œç¡®ä¿ CLI ç”Ÿæˆçš„æ ‡å‡†æ–‡ä»¶æ ¼å¼æ­£ç¡®ï¼Œå¯ä»¥è¢« Blender ç«¯é€šç”¨è„šæœ¬ä½¿ç”¨ã€‚

## æµ‹è¯•åœºæ™¯
**æœ€å°æµ‹è¯•ç”¨ä¾‹**: "ä¸€ä¸ªç©ºæˆ¿é—´ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªç«‹æ–¹ä½“æ¡Œå­"

è¿™ä¸ªæµ‹è¯•ç”¨ä¾‹è¶³å¤Ÿç®€å•ï¼Œå¯ä»¥å¿«é€ŸéªŒè¯æ•´ä¸ªæµç¨‹ï¼ŒåŒæ—¶åˆåŒ…å«äº†åŸºæœ¬çš„å¯¹è±¡å’Œå¸ƒå±€ä¿¡æ¯ã€‚

## æµ‹è¯•æ­¥éª¤

### 1. è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•

```bash
# Linux/Mac
./run_e2e_test.sh

# Windows
run_e2e_test.bat

# æˆ–è€…ç›´æ¥è¿è¡Œ Python è„šæœ¬
python tests/e2e_test.py
```

### 2. éªŒè¯æµ‹è¯•ç»“æœ

æµ‹è¯•è„šæœ¬ä¼šè‡ªåŠ¨éªŒè¯ä»¥ä¸‹å†…å®¹ï¼š

#### CLI è¾“å‡ºéªŒè¯
- âœ… JSON æ ¼å¼è¾“å‡º
- âœ… åŒ…å« session_id
- âœ… åŒ…å« workspace_path
- âœ… åŒ…å« artifacts ä¿¡æ¯
- âœ… åŒ…å« stages_completed åˆ—è¡¨

#### æ ‡å‡†æ–‡ä»¶æ ¼å¼éªŒè¯

**layout_solution_v1.json**
- âœ… åŒ…å« success å­—æ®µ
- âœ… åŒ…å« object_placements å­—å…¸
- âœ… æ¯ä¸ªå¯¹è±¡åŒ…å« posã€rot_eulerã€scale
- âœ… æ•°å€¼æ ¼å¼æ­£ç¡®ï¼ˆé•¿åº¦ä¸º3çš„æ•°ç»„ï¼‰

**asset_manifest.json**
- âœ… åŒ…å« versionã€assetsã€total_assetsã€total_size_mb
- âœ… æ¯ä¸ªèµ„äº§åŒ…å« asset_pathã€formatã€size_bytesã€checksumã€metadata
- âœ… èµ„äº§è·¯å¾„ç›¸å¯¹äº session ç›®å½•

**blender_object_map.json**
- âœ… åŒ…å« naming_convention å­—æ®µ
- âœ… å‘½åçº¦å®šä¸º "object_name_equals_id"
- âœ… åŒ…å« mapping å­—å…¸

### 3. æ£€æŸ¥æµ‹è¯•æŠ¥å‘Š

æµ‹è¯•å®Œæˆåä¼šç”Ÿæˆ `test_report.json`ï¼ŒåŒ…å«ï¼š

```json
{
  "test_name": "Holodeck E2E Build Test",
  "test_prompt": "ä¸€ä¸ªç©ºæˆ¿é—´ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªç«‹æ–¹ä½“æ¡Œå­",
  "session_id": "2026-01-22T17-43-23Z_xxx",
  "status": "PASSED",
  "artifacts": {
    "layout_solution": {
      "file": "layout_solution_v1.json",
      "objects_count": 1,
      "success": true
    },
    "asset_manifest": {
      "file": "asset_manifest.json",
      "assets_count": 1,
      "total_size_mb": 0.1
    }
  },
  "cli_output_summary": {
    "ok": true,
    "stages_completed": ["scene_ref", "objects", "constraints", "layout"],
    "message": "Build completed successfully"
  }
}
```

## é¢„æœŸæˆåŠŸç»“æœ

### æ–‡ä»¶äº§ç‰©
```
workspace/sessions/<session_id>/
â”œâ”€â”€ layout_solution_v1.json    # âœ… å¯¹è±¡å¸ƒå±€ä¿¡æ¯
â”œâ”€â”€ asset_manifest.json        # âœ… èµ„äº§æ¸…å•
â”œâ”€â”€ blender_object_map.json    # âœ… å¯¹è±¡å‘½åæ˜ å°„
â”œâ”€â”€ objects.json              # âœ… å¯¹è±¡å®šä¹‰
â””â”€â”€ constraints_v1.json       # âœ… çº¦æŸå®šä¹‰
```

### æ§åˆ¶å°è¾“å‡º
```
ğŸš€ å¼€å§‹ Holodeck ç«¯åˆ°ç«¯éªŒæ”¶æµ‹è¯•
==================================================
ğŸ§ª æ­¥éª¤ 1: è¿è¡Œ holodeck build...
âœ… CLI æ‰§è¡ŒæˆåŠŸï¼Œsession_id: 2026-01-22T17-43-23Z_xxx
ğŸ§ª æ­¥éª¤ 2: éªŒè¯ session æ–‡ä»¶...
âœ… æ–‡ä»¶å­˜åœ¨: layout_solution_v1.json
âœ… æ–‡ä»¶å­˜åœ¨: asset_manifest.json
âœ… æ–‡ä»¶å­˜åœ¨: blender_object_map.json
âœ… æ–‡ä»¶å­˜åœ¨: objects.json
âœ… æ–‡ä»¶å­˜åœ¨: constraints_v1.json
ğŸ§ª æ­¥éª¤ 3: éªŒè¯ layout_solution.json æ ¼å¼...
âœ… layout_solution.json æ ¼å¼æ­£ç¡®ï¼ŒåŒ…å« 1 ä¸ªå¯¹è±¡
ğŸ§ª æ­¥éª¤ 4: éªŒè¯ asset_manifest.json æ ¼å¼...
âœ… asset_manifest.json æ ¼å¼æ­£ç¡®ï¼ŒåŒ…å« 1 ä¸ªèµ„äº§
ğŸ§ª æ­¥éª¤ 5: éªŒè¯ blender_object_map.json æ ¼å¼...
âœ… blender_object_map.json æ ¼å¼æ­£ç¡®
ğŸ§ª æ­¥éª¤ 6: ç”Ÿæˆ Blender apply è„šæœ¬ç¤ºä¾‹...
âœ… ç”Ÿæˆ Blender apply è„šæœ¬ç¤ºä¾‹
ğŸ§ª æ­¥éª¤ 7: ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š...
âœ… æµ‹è¯•æŠ¥å‘Šå·²ä¿å­˜: test_report.json
==================================================
ğŸ‰ ç«¯åˆ°ç«¯æµ‹è¯•é€šè¿‡ï¼
ğŸ“ Session: 2026-01-22T17-43-23Z_xxx
ğŸ“Š å¯¹è±¡æ•°é‡: 1
ğŸ“¦ èµ„äº§æ•°é‡: 1
ğŸ“ æŠ¥å‘Šæ–‡ä»¶: test_report.json
```

## éªŒæ”¶æ ‡å‡†

### å¿…é¡»é€šè¿‡çš„é¡¹ç›®
- [ ] CLI æˆåŠŸæ‰§è¡Œå¹¶è¿”å› JSON æ ¼å¼è¾“å‡º
- [ ] ç”Ÿæˆå®Œæ•´çš„ session ç›®å½•ç»“æ„
- [ ] layout_solution_v1.json æ ¼å¼æ­£ç¡®
- [ ] asset_manifest.json æ ¼å¼æ­£ç¡®
- [ ] blender_object_map.json æ ¼å¼æ­£ç¡®
- [ ] æµ‹è¯•æŠ¥å‘Šæ˜¾ç¤º status: "PASSED"

### å¯é€‰éªŒè¯é¡¹ç›®
- [ ] ä½¿ç”¨ç”Ÿæˆçš„ Blender apply è„šæœ¬åœ¨ Blender ä¸­éªŒè¯åœºæ™¯
- [ ] éªŒè¯èµ„äº§æ–‡ä»¶å®é™…å­˜åœ¨
- [ ] éªŒè¯å¸ƒå±€ä½ç½®åˆç†æ€§

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**é—®é¢˜**: CLI æ‰§è¡Œå¤±è´¥
**è§£å†³æ–¹æ¡ˆ**: æ£€æŸ¥ Python ç¯å¢ƒã€ä¾èµ–å®‰è£…ã€holodeck_cli æ¨¡å—

**é—®é¢˜**: JSON è§£æé”™è¯¯
**è§£å†³æ–¹æ¡ˆ**: æ£€æŸ¥ CLI è¾“å‡ºæ˜¯å¦ä¸ºæœ‰æ•ˆ JSONï¼ŒæŸ¥çœ‹åŸå§‹è¾“å‡º

**é—®é¢˜**: æ–‡ä»¶ä¸å­˜åœ¨
**è§£å†³æ–¹æ¡ˆ**: æ£€æŸ¥ session ç›®å½•è·¯å¾„ï¼Œç¡®è®¤ CLI æ‰§è¡ŒæˆåŠŸ

**é—®é¢˜**: æ ¼å¼éªŒè¯å¤±è´¥
**è§£å†³æ–¹æ¡ˆ**: æ£€æŸ¥æ ‡å‡†æ–‡ä»¶æ ¼å¼ï¼Œå‚è€ƒ STANDARD_FORMATS.md

### è°ƒè¯•ä¿¡æ¯

æµ‹è¯•è„šæœ¬ä¼šè¾“å‡ºè¯¦ç»†çš„æ‰§è¡Œä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š
- CLI å‘½ä»¤å’Œå‚æ•°
- æ–‡ä»¶éªŒè¯ç»“æœ
- JSON è§£æé”™è¯¯è¯¦æƒ…
- æµ‹è¯•æŠ¥å‘Šè·¯å¾„

## å›å½’æµ‹è¯•

è¿™ä¸ªæµ‹è¯•ç”¨ä¾‹åº”è¯¥ä½œä¸ºå›å½’æµ‹è¯•çš„ä¸€éƒ¨åˆ†ï¼Œåœ¨ä»¥ä¸‹æƒ…å†µä¸‹è¿è¡Œï¼š

1. **CLI åŠŸèƒ½æ›´æ–°** - éªŒè¯æ ‡å‡†è¾“å‡ºæ ¼å¼æœªæ”¹å˜
2. **æ ‡å‡†æ–‡ä»¶æ ¼å¼æ›´æ–°** - ç¡®ä¿å‘åå…¼å®¹æ€§
3. **Blender é›†æˆæ›´æ–°** - éªŒè¯æ¥å£ç¨³å®šæ€§
4. **å‘å¸ƒå‰éªŒè¯** - ç¡®ä¿ç«¯åˆ°ç«¯åŠŸèƒ½æ­£å¸¸

## æ‰©å±•æµ‹è¯•

åŸºäºè¿™ä¸ªåŸºç¡€æµ‹è¯•ï¼Œå¯ä»¥æ‰©å±•æ›´å¤šæµ‹è¯•ç”¨ä¾‹ï¼š

1. **å¤šå¯¹è±¡æµ‹è¯•** - åŒ…å«å¤šä¸ªå¯¹è±¡çš„å¤æ‚åœºæ™¯
2. **çº¦æŸæµ‹è¯•** - éªŒè¯çº¦æŸç”Ÿæˆå’Œæ±‚è§£
3. **èµ„äº§ç”Ÿæˆæµ‹è¯•** - éªŒè¯ 3D èµ„äº§ç”Ÿæˆæµç¨‹
4. **Blender é›†æˆæµ‹è¯•** - å®Œæ•´çš„ Blender apply æµç¨‹
5. **æ€§èƒ½æµ‹è¯•** - å¤§è§„æ¨¡åœºæ™¯çš„æ€§èƒ½éªŒè¯

---

**æœ€åæ›´æ–°**: 2026å¹´1æœˆ22æ—¥
**æµ‹è¯•è„šæœ¬ç‰ˆæœ¬**: 1.0
**é€‚ç”¨ç‰ˆæœ¬**: Holodeck CLI v1.0+